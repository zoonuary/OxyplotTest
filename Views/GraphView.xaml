<UserControl x:Class="OxyTest.Views.GraphView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:OxyTest.Views"
			 xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm" xmlns:ViewModels="clr-namespace:OxyTest.ViewModels"
             xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"
             mc:Ignorable="d"
             d:DesignHeight="300" d:DesignWidth="300">
	
	<UserControl.Resources>
		<ResourceDictionary Source="pack://application:,,,/OxyTest;component/Themes/Converters.xaml"/>
	</UserControl.Resources>

    <dxmvvm:Interaction.Behaviors>
        <dxmvvm:EventToCommand EventName="Loaded" Command="{Binding CMD_Loaded}"/>
    </dxmvvm:Interaction.Behaviors>


    <DockPanel LastChildFill="True">
        <dxb:BarManager DockPanel.Dock="Top">
            <dxb:BarManager.Bars>
                <dxb:Bar Caption="Main Menu" IsMainMenu="True">
                    <dxb:Bar.DockInfo>
                        <dxb:BarDockInfo ContainerType="Top"/>
                    </dxb:Bar.DockInfo>
                    <dxb:Bar.Items>
                        <!--<dxb:BarCheckItem Content="Start" GroupIndex="0"
										  ToolTip="Start updating graph"
										  ToolTipService.ShowOnDisabled="True"
										  IsChecked="{Binding DataContext.GraphData.PlayMode, 
														RelativeSource={RelativeSource AncestorType=UserControl}, 
														Converter={StaticResource PlayModeToBooleanConverer}, Mode=TwoWay}"
										  IsEnabled="{Binding DataContext.GraphData.PlayMode, 
														RelativeSource={RelativeSource AncestorType=UserControl}, 
														Converter={StaticResource PlayModeToEnabledConverter}}"/>
                        --><!--Command="{Binding DataContext.GraphData.Paused, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"--><!--
                        <dxb:BarCheckItem Content="Stop" GroupIndex="0" 
										  ToolTip="Pause graph updates"IsChecked="{Binding LocalStatus, Converter={StaticResource LocalStatusToBooleanConverter}}"
										  ToolTipService.ShowOnDisabled="True"
										  IsEnabled="{Binding DataContext.GraphData.PlayMode, IsChecked="{Binding LocalStatus, Converter={StaticResource LocalStatusToBooleanConverter}}"
														RelativeSource={RelativeSource AncestorType=UserControl}, 
														Converter={StaticResource PlayModeToEnabledConverter}}"/>-->

                        <dxb:BarCheckItem Content="Start" 
                                          ToolTip="Start Updating Graph"
                                          GroupIndex="0"
                                          Command="{Binding CMD_START}"
                                          IsChecked="{Binding LocalStatus, Converter={StaticResource LocalStatusToBooleanConverter}, Mode=OneWay}"
                                          IsEnabled="{Binding LocalStatus, Converter={StaticResource StartButtonEnableControlConverter}}"/>
                                          
                        <dxb:BarCheckItem Content="Stop" 
                                          ToolTip="Stop Updating Graph"
                                          GroupIndex="0"
                                          Command="{Binding CMD_STOP}"
                                          
                                          IsEnabled="{Binding LocalStatus, Converter={StaticResource StartButtonEnableControlConverter}}"/>
                                          
                        <dxb:BarButtonItem Content="clear"/>

                        <dxb:BarItemLinkSeparator/>

                        <dxb:BarButtonItem Content="Add Signal..." Command="{Binding CMD_AppendGraph}"/>
                        <dxb:BarButtonItem Content="Remove Signal" Command="{Binding CMD_RemoveGraph}"/>
                        <dxb:BarButtonItem Content="Clear Signals" Command="{Binding CMD_ClearGraph}"/>

                        <dxb:BarButtonItem Content="ShowRawValue" Command="{Binding CMD_ShowRawValues}"/>
                        <dxb:BarButtonItem Content="ShowPhysicalValue" Command="{Binding CMD_ShowPhysicalValues}"/>

                        <dxb:BarItemLinkSeparator/>

                        <dxb:BarSplitCheckItem Content="ViewType" ActAsDropDown="True" AllowUncheckInGroup="False" x:Name="ViewTypeSplitCheckItem">
                            <dxb:PopupMenu Closed="PopupMenu_Closed">
                                <dxb:BarCheckItem Content="Single Y" GroupIndex="1" IsChecked="{Binding PageType,Converter={StaticResource PageTypeToBoolConverter}, ConverterParameter=SINGLE_Y, Mode=TwoWay}"/>
                                <dxb:BarCheckItem Content="Multiple Y" GroupIndex="1" IsChecked="{Binding PageType,Converter={StaticResource PageTypeToBoolConverter}, ConverterParameter=MULTIPLE_Y, Mode=TwoWay}"/>
                                <dxb:BarCheckItem Content="Separate Y" GroupIndex="1" IsChecked="{Binding PageType,Converter={StaticResource PageTypeToBoolConverter}, ConverterParameter=SEPARATE_Y, Mode=TwoWay}"/>
                            </dxb:PopupMenu>
                        </dxb:BarSplitCheckItem>

                        <dxb:BarSplitCheckItem Content="Label" ActAsDropDown="True" x:Name="LabelSplitCheckItem">
                            <dxb:PopupMenu Closed="PopupMenu_Closed">
                                <dxb:BarCheckItem Content="X-Axis" IsChecked="{Binding GraphCore.GraphData.Xaxis_LabelVisible, Mode=TwoWay}"/>
                                <dxb:BarCheckItem Content="Y-Axis" IsChecked="{Binding GraphCore.GraphData.Yaxis_LabelVisible, Mode=TwoWay}"/>
                            </dxb:PopupMenu>
                        </dxb:BarSplitCheckItem>

                        <dxb:BarCheckItem Content="GridLineVisible" IsChecked="{Binding GraphCore.GraphData.GridLineVisible, Mode=TwoWay}"/>

                        <dxb:BarItemLinkSeparator/>
                        <dxb:BarCheckItem Content="Default Cursor" GroupIndex="2" 
                                          ToolTip="set default cursor" ToolTipService.ShowOnDisabled="True"
                                          IsChecked="{Binding GraphCore.GraphData.CursorType, Converter={StaticResource CursorTypeToBooleanConverter}, ConverterParameter=DEFAULT, Mode=TwoWay}"/>
                        
                        <dxb:BarCheckItem Content="Measuring Cursor" GroupIndex="2"
                                          ToolTip="set default cursor" ToolTipService.ShowOnDisabled="True"
                                          IsChecked="{Binding GraphCore.GraphData.CursorType, Converter={StaticResource CursorTypeToBooleanConverter}, ConverterParameter=MEASUERMENT, Mode=TwoWay}"/>
                        
                        <dxb:BarCheckItem Content="Diff Cursor" GroupIndex="2"
                                          ToolTip="set default cursor" ToolTipService.ShowOnDisabled="True"
                                          IsChecked="{Binding GraphCore.GraphData.CursorType, Converter={StaticResource CursorTypeToBooleanConverter}, ConverterParameter=DIFFERENCE, Mode=TwoWay}"/>

                        <dxb:BarCheckItem Content="Fit X" IsChecked="{Binding GraphCore.GraphData.Xaxis_isFitMode, Mode=TwoWay}"/>

                        <dxb:BarCheckItem Content="Sync X" IsChecked="{Binding GraphCore.GraphData.Xaxis_isSyncMode, Mode=TwoWay}"/>

                        <dxb:BarButtonItem Content="Test" Command="{Binding OnTestClicked}"/>
                    </dxb:Bar.Items>
                </dxb:Bar>
            </dxb:BarManager.Bars>

            <Grid DockPanel.Dock="Bottom">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="5"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid x:Name="GridViewContainer"/>
                <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Stretch" Background="Transparent"
					  ResizeBehavior="PreviousAndNext" ShowsPreview="True"/>
                <Grid x:Name="GraphPlotContainer" Grid.Column="2"/>
            </Grid>
        </dxb:BarManager>
    </DockPanel>
</UserControl>
